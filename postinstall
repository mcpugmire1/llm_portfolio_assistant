#!/usr/bin/env bash
set -e

echo "ðŸ§© postinstall canary â€“ script is running"

# 1 Â· Remove any cached copy of the deprecated SDK (harmless if not present)
pip uninstall -y pinecone-client || true

# 2 Â· Install Git LFS if the build image doesnâ€™t have it
if ! command -v git-lfs >/dev/null 2>&1 ; then
  echo "Installing git-lfsâ€¦"
  apt-get update -qq && apt-get install -y git-lfs
fi

# 3 Â· Fetch large files (your FAISS index)
echo "Fetching Git-LFS assetsâ€¦"
git lfs install --local
git lfs pull